(this["webpackJsonpchess-engine-app"]=this["webpackJsonpchess-engine-app"]||[]).push([[0],{160:function(e,t,a){e.exports=a(287)},165:function(e,t,a){},167:function(e,t,a){},287:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(10),u=a.n(o),c=(a(165),a(28)),s=a(29),i=a(32),l=a(31),h=(a(166),a(167),a(298)),p=a(299),d=a(296),m=a(301),v=a(295),f=a(297),b=a(75),g=a(43),S=a.n(g),y=a(68),O=a(33),q=a(23),E=a(149),C=a(136),j=a.n(C),w=a(137),k=a.n(w);function M(e){return x.apply(this,arguments)}function x(){return(x=Object(y.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={board:t},e.next=3,fetch("/api/submit_move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 3:return r=e.sent,e.abrupt("return",r.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={fen:"start",dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[]},e.checkOrientation=function(){"b"===e.props.userColor&&e.aiPlay()},e.removeHighlightSquare=function(){e.setState((function(e){var t=e.pieceSquare,a=e.history;return{squareStyles:H({pieceSquare:t,history:a})}}))},e.highlightSquare=function(t,a){var r=[t].concat(Object(E.a)(a)).reduce((function(t,a){return Object(q.a)(Object(q.a)(Object(q.a)({},t),Object(O.a)({},a,{background:"radial-gradient(circle, #fffc00 36%, transparent 40%)",borderRadius:"50%"})),H({history:e.state.history,pieceSquare:e.state.pieceSquare}))}),{});e.setState((function(e){var t=e.squareStyles;return{squareStyles:Object(q.a)(Object(q.a)({},t),r)}}))},e.onDrop=function(t){var a=t.sourceSquare,r=t.targetSquare;null!==e.game.move({from:a,to:r,promotion:"q"})&&(e.setState((function(t){var a=t.history,r=t.pieceSquare;return{fen:e.game.fen(),history:e.game.history({verbose:!0}),squareStyles:H({pieceSquare:r,history:a})}})),e.aiPlay())},e.aiPlay=Object(y.a)(S.a.mark((function t(){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(e.game.fen());case 3:if(a=t.sent,null!==e.game.move(a.board,{sloppy:!0})){t.next=7;break}return t.abrupt("return");case 7:e.setState((function(t){var a=t.history,r=t.pieceSquare;return{fen:e.game.fen(),history:e.game.history({verbose:!0}),squareStyles:H({pieceSquare:r,history:a})}})),"continuing"!==a.match_status&&e.handleMatchEnd(a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),b.b.error("Uh oh! Harold couldn't handle the pressure... Try refreshing");case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e.onMouseOverSquare=function(t){var a=e.game.moves({square:t,verbose:!0});if(0!==a.length){for(var r=[],n=0;n<a.length;n++){if(a[n].color!==e.props.userColor)return;r.push(a[n].to)}e.highlightSquare(t,r)}},e.onMouseOutSquare=function(t){return e.removeHighlightSquare(t)},e.onDragOverSquare=function(t){e.setState({dropSquareStyle:"e4"===t||"d4"===t||"e5"===t||"d5"===t?{backgroundColor:"cornFlowerBlue"}:{boxShadow:"inset 0 0 1px 4px rgb(255, 255, 0)"}})},e.handleMatchEnd=function(t){e.props.handleMatchEnd(t)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.game=new k.a,this.checkOrientation()}},{key:"render",value:function(){var e=this.state,t=e.fen,a=e.dropSquareStyle,r=e.squareStyles;return this.props.children({squareStyles:r,position:t,onMouseOverSquare:this.onMouseOverSquare,onMouseOutSquare:this.onMouseOutSquare,onDrop:this.onDrop,dropSquareStyle:a,onDragOverSquare:this.onDragOverSquare})}}]),a}(r.Component),D=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(A,{userColor:this.props.userColor,handleMatchEnd:this.props.handleMatchEnd},(function(t){var a=t.position,r=t.onDrop,o=t.onMouseOverSquare,u=t.onMouseOutSquare,c=t.squareStyles,s=t.dropSquareStyle,i=t.onDragOverSquare;return n.a.createElement(j.a,{id:"board",width:320,position:a,orientation:"w"===e.props.userColor?"white":"black",onDrop:r,onMouseOverSquare:o,onMouseOutSquare:u,boardStyle:{borderRadius:"5px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"},squareStyles:c,dropSquareStyle:s,onDragOverSquare:i})})))}}]),a}(n.a.Component),H=function(e){var t=e.pieceSquare,a=e.history,r=a.length&&a[a.length-1].from,n=a.length&&a[a.length-1].to;return Object(q.a)(Object(q.a)(Object(O.a)({},t,{backgroundColor:"rgba(255, 255, 0, 0.4)"}),a.length&&Object(O.a)({},r,{backgroundColor:"rgba(255, 255, 0, 0.4)"})),a.length&&Object(O.a)({},n,{backgroundColor:"rgba(255, 255, 0, 0.4)"}))},P=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={dimmerActive:!0,endGameModal:!1,winner:"",userColor:"",message:""},e.colorOptions=[{key:"w",value:"w",text:"White"},{key:"b",value:"b",text:"Black"}],e.setUserColor=function(t,a){e.setState({userColor:a.value})},e.handleMatchEnd=function(t){var a="";a="1-0"===t.match_status?"w":"0-1"===t.match_status?"b":"draw",e.setState({endGameModal:!0,winner:a,message:t.message})},e.handleHeader=function(t){return t===e.state.userColor?"Congratulations! You bested Harold the Chess Engine":"b"===t||"w"===t?"Too bad, you were no match for Harold.":"Game Over"},e.handleReplayClick=function(){e.setState({dimmerActive:!e.state.dimmerActive,userColor:"",endGameModal:!1,winner:"",message:""})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.dimmerActive,r=t.userColor,o=t.endGameModal,u=t.winner,c=t.message;return n.a.createElement("div",null,n.a.createElement(h.a,{compact:!0,padded:"very",color:"grey",inverted:!0,size:"massive"},n.a.createElement(p.a,{active:a,page:!0}),a?n.a.createElement(d.a,{open:a},n.a.createElement(m.a,null," Welcome to Harold the Chess Engine "),n.a.createElement(d.a.Content,null,n.a.createElement("p",null,"Please select your colour to begin playing:"),n.a.createElement(v.a,{placeholder:"Colour",options:this.colorOptions,onChange:function(t,a){return e.setUserColor(t,a)}})),n.a.createElement(d.a.Actions,null,n.a.createElement(f.a,{positive:!0,disabled:""===r,onClick:function(){return e.setState({dimmerActive:!a})}},"Play!"))):n.a.createElement(D,{userColor:r,handleMatchEnd:this.handleMatchEnd}),o?n.a.createElement(d.a,{open:o},n.a.createElement(m.a,null," ",this.handleHeader(u)," "),n.a.createElement(d.a.Content,null,n.a.createElement("p",null,c),n.a.createElement("p",null,"Would you like to play again?")),n.a.createElement(d.a.Actions,null,n.a.createElement(f.a,{positive:!0,onClick:function(){return e.handleReplayClick()}},"Play Again!"),n.a.createElement(f.a,{negative:!0,onClick:function(){return e.setState({endGameModal:!1})}},"Close"))):"",n.a.createElement(b.a,null)))}}]),a}(n.a.Component),G=function(e){Object(i.a)(a,e);var t=Object(l.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(P,null))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(286);u.a.render(n.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[160,1,2]]]);
//# sourceMappingURL=main.79532b5c.chunk.js.map