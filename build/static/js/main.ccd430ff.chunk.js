(this["webpackJsonpchess-engine-app"]=this["webpackJsonpchess-engine-app"]||[]).push([[0],{157:function(e,t,r){e.exports=r(283)},162:function(e,t,r){},163:function(e,t,r){},283:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(27),u=r.n(o),i=(r(162),r(37)),s=r(38),c=r(42),l=r(41),p=(r(163),r(293)),h=r(294),v=r(290),S=r(295),f=r(289),b=r(291),m=r(43),d=r.n(m),g=r(67),y=r(29),q=r(22),O=r(146),j=r(133),C=r.n(j),k=r(134),w=r.n(k);function E(e){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(d.a.mark((function e(t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={board:t},e.next=3,fetch("/api/submit_move",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={fen:"start",dropSquareStyle:{},squareStyles:{},pieceSquare:"",square:"",history:[]},e.checkOrientation=function(){"b"===e.props.userColor.userColor&&e.aiPlay()},e.removeHighlightSquare=function(){e.setState((function(e){var t=e.pieceSquare,r=e.history;return{squareStyles:A({pieceSquare:t,history:r})}}))},e.highlightSquare=function(t,r){var a=[t].concat(Object(O.a)(r)).reduce((function(t,r){return Object(q.a)(Object(q.a)(Object(q.a)({},t),Object(y.a)({},r,{background:"radial-gradient(circle, #fffc00 36%, transparent 40%)",borderRadius:"50%"})),A({history:e.state.history,pieceSquare:e.state.pieceSquare}))}),{});e.setState((function(e){var t=e.squareStyles;return{squareStyles:Object(q.a)(Object(q.a)({},t),a)}}))},e.onDrop=function(t){var r=t.sourceSquare,a=t.targetSquare;null!==e.game.move({from:r,to:a,promotion:"q"})&&(e.setState((function(t){var r=t.history,a=t.pieceSquare;return{fen:e.game.fen(),history:e.game.history({verbose:!0}),squareStyles:A({pieceSquare:a,history:r})}})),e.aiPlay())},e.aiPlay=Object(g.a)(d.a.mark((function t(){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e.game.fen());case 2:if(r=t.sent,null!==e.game.move(r.board,{sloppy:!0})){t.next=6;break}return t.abrupt("return");case 6:e.setState((function(t){var r=t.history,a=t.pieceSquare;return{fen:e.game.fen(),history:e.game.history({verbose:!0}),squareStyles:A({pieceSquare:a,history:r})}}));case 7:case"end":return t.stop()}}),t)}))),e.onMouseOverSquare=function(t){var r=e.game.moves({square:t,verbose:!0});if(0!==r.length){for(var a=[],n=0;n<r.length;n++){if(r[n].color!==e.props.userColor.userColor)return;a.push(r[n].to)}e.highlightSquare(t,a)}},e.onMouseOutSquare=function(t){return e.removeHighlightSquare(t)},e.onDragOverSquare=function(t){e.setState({dropSquareStyle:"e4"===t||"d4"===t||"e5"===t||"d5"===t?{backgroundColor:"cornFlowerBlue"}:{boxShadow:"inset 0 0 1px 4px rgb(255, 255, 0)"}})},e}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.game=new w.a,this.checkOrientation()}},{key:"render",value:function(){var e=this.state,t=e.fen,r=e.dropSquareStyle,a=e.squareStyles;return this.props.children({squareStyles:a,position:t,onMouseOverSquare:this.onMouseOverSquare,onMouseOutSquare:this.onMouseOutSquare,onDrop:this.onDrop,dropSquareStyle:r,onDragOverSquare:this.onDragOverSquare})}}]),r}(a.Component);function M(e){return n.a.createElement("div",null,n.a.createElement(D,{userColor:e},(function(t){var r=t.position,a=t.onDrop,o=t.onMouseOverSquare,u=t.onMouseOutSquare,i=t.squareStyles,s=t.dropSquareStyle,c=t.onDragOverSquare;return n.a.createElement(C.a,{id:"board",width:320,position:r,orientation:"w"===e.userColor?"white":"black",onDrop:a,onMouseOverSquare:o,onMouseOutSquare:u,boardStyle:{borderRadius:"5px",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.5)"},squareStyles:i,dropSquareStyle:s,onDragOverSquare:c})})))}var A=function(e){var t=e.pieceSquare,r=e.history,a=r.length&&r[r.length-1].from,n=r.length&&r[r.length-1].to;return Object(q.a)(Object(q.a)(Object(y.a)({},t,{backgroundColor:"rgba(255, 255, 0, 0.4)"}),r.length&&Object(y.a)({},a,{backgroundColor:"rgba(255, 255, 0, 0.4)"})),r.length&&Object(y.a)({},n,{backgroundColor:"rgba(255, 255, 0, 0.4)"}))},P=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={dimmerActive:!0,userColor:""},e.colorOptions=[{key:"w",value:"w",text:"White"},{key:"b",value:"b",text:"Black"}],e.setUserColor=function(t,r){e.setState({userColor:r.value},(function(){return console.log(e.state.userColor)}))},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.dimmerActive,a=t.userColor;return n.a.createElement("div",null,n.a.createElement(p.a,{compact:!0,padded:"very",color:"grey",inverted:!0,size:"massive"},n.a.createElement(h.a,{active:r,page:!0}),r?n.a.createElement(v.a,{open:r},n.a.createElement(S.a,null," Welcome to the Harold Chess Engine "),n.a.createElement(v.a.Content,null,n.a.createElement("p",null,"Please select your colour to begin playing:"),n.a.createElement(f.a,{placeholder:"Colour",options:this.colorOptions,onChange:function(t,r){return e.setUserColor(t,r)}})),n.a.createElement(v.a.Actions,null,n.a.createElement(b.a,{positive:!0,disabled:""===a,onClick:function(){return e.setState({dimmerActive:!r})}},"Play!"))):n.a.createElement(M,{userColor:a})))}}]),r}(n.a.Component),B=function(e){Object(c.a)(r,e);var t=Object(l.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(P,null))}}]),r}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(282);u.a.render(n.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[157,1,2]]]);
//# sourceMappingURL=main.ccd430ff.chunk.js.map